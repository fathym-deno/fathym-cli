import { Runner, CLICommandResolver } from '@fathym/cli';
import { EmbeddedCLIFileSystemHooks } from './EmbeddedCLIFileSystemHooks.ts';
import CLI from '../.cli.ts';

await Runner()
  .FromModuleBuilder(CLI.Version("{{Version}}"), Deno.args, '../')
  .OnInit((ioc) => {
    const embeddedHooks = new EmbeddedCLIFileSystemHooks();

    ioc.Register(
      CLICommandResolver,
      () => new CLICommandResolver(embeddedHooks)
    );
  })
  .Execute();
