import { z } from 'zod';
import { Command, CommandParams } from '@fathym/cli';

const ManageFlagsSchema = z.object({
  verbose: z.boolean().optional().describe('Show detailed output'),
  'dry-run': z
    .boolean()
    .optional()
    .describe('Show what would be done without doing it'),
});

const ManageArgsSchema = z.tuple([]);

class ManageCommandParams extends CommandParams<
  z.infer<typeof ManageArgsSchema>,
  z.infer<typeof ManageFlagsSchema>
> {
  get Verbose(): boolean {
    return this.Flag('verbose') ?? false;
  }
}

export default Command('manage', 'Show management status and options.')
  .Args(ManageArgsSchema)
  .Flags(ManageFlagsSchema)
  .Params(ManageCommandParams)
  .Run(async ({ Params, Log }) => {
    if (Params.DryRun) {
      Log.Info('ðŸ›‘ Dry run: Would show management status');
    } else {
      Log.Info('ðŸ“Š Showing management status...');
      if (Params.Verbose) {
        Log.Info('   Detailed view enabled');
      }
    }
  });
